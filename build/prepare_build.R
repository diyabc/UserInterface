## install requirements for the package or to build the standalone

# /!\ path to local directories defined in local `.Rprofile`

# force update ?
force_update <- TRUE

# requirement: .Renviron file generated by 'generate_Renviron.R'
if(!file.exists(".Renviron"))
    stop("You should run 'generate_Renviron.R'")

# dev requirements
pkg_list <- c("devtools", "fs", "stringr", "gtools")
install_pkg(pkg_list, force_update, R_lib = Sys.getenv("R_LIBS_USER"))

# package dependencies
library(devtools)
dep_list <- devtools::dev_package_deps(src_dir, dependencies = TRUE)$package
dep_list <- dep_list[order(dep_list)]
write.table(
    dep_list, 
    file = file.path(dist_dir, "requirements.txt"), 
    row.names = FALSE, col.names = FALSE, quote = FALSE
)

# install missing or out-dated dependencies
install_pkg(dep_list, force_update)
